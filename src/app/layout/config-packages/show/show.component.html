<div [@routerTransition]>
  <ngx-loading [show]="loading" [config]="{
      backdropBorderRadius: '3px',
      fullScreenBackdrop: true,
      primaryColour: '#222',
      secondaryColour: '#222',
      tertiaryColour: '#222'
  }"></ngx-loading>
  <div class="base-modal-content" style="min-height: 80vh">
    <div class="card ">
      <div class="card-header">
        <div class="row mt-0">
          <div class="col-lg-10">
            <h3 *ngIf="!isEditing">Pacote</h3>
            <h3 *ngIf="isEditing">Editar Pacote</h3>
          </div>
          <div class="col-lg-1 text-right pr-0">
            <i class="mdi mdi-help-circle mdi-24px" style="color:#2869D9;" (click)="help()"></i>
          </div>
          <div class="col-lg-1 text-right pl-0">
            <button type="button" (click)="close()" class="close col text-right" data-dismiss="modal"
              aria-label="Close">
              <span id="call4" aria-hidden="true">&times;</span>
            </button>
          </div>
        </div>
        <div class="row">
          <div style="margin-bottom: 10px" *ngIf="!loading || !isEditing" id="step1">
            <app-buttons-custom [id]="id" [permissionEdit]="permissionEdit" [permissionDelete]="permissionDelete"
              (edit)="editPackage(id)" (delete)="open('focusFirst', id)">
            </app-buttons-custom>
          </div>
        </div>
      </div>

      <div class="card-body" id="step1">
        <form [formGroup]="packageForm" role="FormGroup" (ngSubmit)="postPackage()">
          <div class="form-content">
            <div class="form-group  col-xl-12">
              <label for="">Nome do Pacote</label>
              <input id="labelPackage" type="text" placeholder="Nome do Pacote" class="form-control"
                formControlName="labelPackage" [ngClass]="{ 'is-invalid': !labelPackage.valid }" />
                <div *ngIf="!isEditing || labelPackage.invalid && (labelPackage.dirty || labelPackage.touched)"
                class="invalid-feedback">
                <div *ngIf="!labelPackage.valid">
                  Nome é obrigatório.
                </div>
              </div>
            </div>
            <div class="form-group  col-xl-12">
              <label for="">Descrição do Pacote</label>
              <input id="describe" type="text" placeholder="Descrição do Pacote" class="form-control"
                formControlName="describe" />
            </div>
            <div class="form-group col-xl-4">
              <label for="">Quantidade de Arquivos para assinatura</label>
              <input type="text" placeholder="0" class="form-control" formControlName="filesPackage" />
            </div>
            <div class="form-group col-xl-2">
              <div class="pretty p-switch p-fill">
                <input type="checkbox" formControlName="signature" value="" checked
                  (ngModelChange)="signiatureChange($event)" />
                <div class="state">
                  <label>Assinatura Digital</label>
                </div>
              </div>
            </div>
            <div class="form-group col-xl-2">
              <div class="pretty p-switch p-fill">
                <input type="checkbox" formControlName="ocr" (ngModelChange)="ocrChange($event)" />
                <div class="state">
                  <label>Ocr</label>
                </div>
              </div>
            </div>
            <div class="form-group col-xl-4" *ngIf="ocrValue !== false">
              <label for="">Quantidade de Paginas para Ocr</label>
              <input type="text" placeholder="0" class="form-control" formControlName="pagesPackage" />
            </div>
            <div class="form-group col-xl-8">
              <label for="">Valor do Pacote</label>
              <input id="price" step="0.01" min="0.01" type="number" placeholder="R$" class="form-control" formControlName="price" />
            </div>
          </div>
          <div *ngIf="isEditing" class="modal-footer" >
            <div class="pull-right" id="call5">
                <button  type="button" (click)="cancelEdit()" class="btn btn-danger"
                    style="margin-right:10px">Cancelar</button>
                <button type="button" (click)="submit()" class="btn btn-primary">
                    Salvar
                </button>
            </div>
        </div>
        </form>
      </div>
    </div>
  </div>
</div>