<div [@routerTransition]>
    <ngx-loading
        [show]="loading"
        [config]="{
            backdropBorderRadius: '3px',
            fullScreenBackdrop: true,
            primaryColour: '#222',
            secondaryColour: '#222',
            tertiaryColour: '#222'
        }"
    ></ngx-loading>
    <app-page-header
        [id]="storeHouse._id"
        [heading]="'Dados do Depósito'"
        [icon]="'fa-house'"
    ></app-page-header>
    <div style="margin-bottom: 10px">
        <app-button-back [redirectTo]="'storehouses'"></app-button-back>
        <app-buttons-custom
            (edit)="editStoreHouse(storeHouse._id)"
            (delete)="open('focusFirst', storeHouse._id)"
            [permissionEdit]="permissionEdit"
            [permissionDelete]="permissionDelete"
        >
        </app-buttons-custom>
        <br />
    </div>

    <div class="card bg-light mb-12">
        <div class="card-body">
            <ngb-tabset #tab>
                <ngb-tab title="Depósito" id="tab1">
                    <ng-template ngbTabContent>
                        <br />
                        <form
                            [formGroup]="storeHouseForm"
                            role="FormGroup"
                            (ngSubmit)="updateStoreHouse()">
                            <div class="form-content">
                                <div class="form-group">
                                    <label for="name">Nome</label>
                                    <input
                                        id="name"
                                        class="form-control"
                                        [ngClass]="{
                                            'is-invalid':
                                                !name.valid && name.value === ''
                                        }"
                                        formControlName="name"
                                    />
                                    <div
                                        *ngIf="
                                            name.invalid &&
                                            (name.dirty || name.touched)"
                                        class="invalid-feedback">
                                        <div *ngIf="!name.valid">
                                            Nome é obrigatório.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="checkbox">
                                    <label>
                                        <input
                                            type="checkbox"
                                            formControlName="mapStorehouse"
                                            name=""
                                            value=""/>
                                        Mapear Depósito
                                    </label>
                                </div>
                            </div>
                        </form>
                    </ng-template>
                </ngb-tab>

                <div class="card bg-light mb-12" >
                    <ngb-tab title="Pesquisar Posições" id="tab2" [disabled]= "!storeHouse.mapStorehouse">
                        <ng-template ngbTabContent>
                            <br />
                        <form
                            [formGroup]="storeHouseForm"
                            role="FormGroup"
                            (ngSubmit)="updateStoreHouse()"
                        >
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-content">
                                    <div class="form-group">
                                        <label for="name">Nome</label>
                                        <input
                                            id="name"
                                            class="form-control"
                                            [ngClass]="{
                                                'is-invalid':
                                                    !name.valid && name.value === ''
                                            }"
                                            formControlName="name"
                                        />
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="input-name">Posição</label>
                                    <input type="text" class="form-control" formControlName="position" />
                                    <div *ngIf="name.invalid && (name.dirty || name.touched)"
                                        class="invalid-feedback">
                                        <div *ngIf="!name.valid">
                                            Posição é obrigatória.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row col-12" style="justify-content: center; margin-top: 10px;">
                            <div class="form-group mb-2">
                                    <button type="submit"  class="btn btn-primary" [disabled]="">
                                        <i class="fa fa-search"></i>
                                    </button>
                                    <button type="button" style="margin-left: 5px;"[disabled]="" class="btn btn-default">
                                        Limpar Campos
                                    </button>
                            </div>
                        </div>
                            </form>
                        </ng-template>
                    </ngb-tab>
                </div>

                <div class="card bg-light mb-12">
                    <ngb-tab title="Cadastrar Posições" id="tab3" [disabled]= "!storeHouse.mapStorehouse">
                        <ng-template ngbTabContent>
                            <br />
                            <p>asdasd</p>
                        </ng-template>
                    </ngb-tab>
                </div>

            </ngb-tabset>

        </div>
    </div>
</div>
